(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.framedList=b():a.framedList=b()})(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(a,'__esModule',{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&'object'==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,'default',{enumerable:!0,value:a}),2&c&&'string'!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s='../src/index.js')}({"../node_modules/webpack/buildin/harmony-module.js":function(a){a.exports=function(a){if(!a.webpackPolyfill){var b=Object.create(a);b.children||(b.children=[]),Object.defineProperty(b,'loaded',{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,'id',{enumerable:!0,get:function(){return b.i}}),Object.defineProperty(b,'exports',{enumerable:!0}),b.webpackPolyfill=1}return b}},"../src/core/directives/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'coreDirectivesModule',function(){return e});var d=c('../src/core/directives/on-scroll.directive.js');const e=angular.module('core.directives',['core.services']);e.directive('onScroll',d.onScroll)},"../src/core/directives/on-scroll.directive.js":function(a,b,c){'use strict';c.r(b),c.d(b,'onScroll',function(){return d});const d=['$parse','utils',(a,b)=>({restrict:'A',link:(c,d,e)=>{const f=+e.debounce,g=a(e.onScroll),h=b.debounce((a)=>{g(c,{event:a})},f);d.on('scroll',h),d.on('$destroy',()=>{d.off('scroll',h)})}})]},"../src/core/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'coreModule',function(){return f});var d=c('../src/core/directives/index.js'),e=c('../src/core/services/index.js');const f=angular.module('core',[d.coreDirectivesModule.name,e.coreServicesModule.name])},"../src/core/services/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'coreServicesModule',function(){return e});var d=c('../src/core/services/utils.service.js');const e=angular.module('core.services',[]);e.factory('utils',d.utils)},"../src/core/services/utils.service.js":function(a,b,c){'use strict';c.r(b),c.d(b,'utils',function(){return d});const d=['$timeout',(a)=>{return{debounce:(b,c)=>{let d=Date.now(),e=null;const f=(b)=>{e=a(b,c)};return(...g)=>{null!==e&&a.cancel(e),d<=Date.now()-c?(e=null,b(...g)):f(()=>b(...g)),d=Date.now()}},throttle:(b,c)=>{let d=null;return(...e)=>{null!==d||(d=a(()=>{b(...e),a.cancel(d),d=null},c))}}}}]},"../src/index.js":function(a,b,c){'use strict';c.r(b),function(a){var b=c('../src/core/index.js'),d=c('../src/lazy-list/index.js'),e=c('../src/list/index.js'),f=c('../src/list-item/index.js');a.exports=angular.module('framedList',[b.coreModule.name,f.listItemModule.name,e.listModule.name,d.lazyListModule.name])}.call(this,c('../node_modules/webpack/buildin/harmony-module.js')(a))},"../src/lazy-list/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'lazyListModule',function(){return e});var d=c('../src/lazy-list/lazy-list.component.js');const e=angular.module('lazyList',['core','list','list-item']);e.directive('lazyList',d.lazyListDirective)},"../src/lazy-list/lazy-list.component.js":function(a,b,c){'use strict';c.r(b),c.d(b,'lazyListDirective',function(){return d});const d=['$parse','$window','utils',(a,b,c)=>({restrict:'A',require:'list',link:(d,e,f,g)=>{var h=Number.isFinite;const i=a(f.onUnscrollable),j=a(f.onTooLong),k=e[0];let l=+f.batchLength,m=[],n=[];d.batchedList=[],h(l)||(l=g.DEFAULT_BATCH_LENGTH);const o=(a)=>a*g.MIN_SCROLLBAR_FACTOR,p={start:null,end:null},q=(a,b)=>{p.start=a,p.end=b},r=(a)=>{const b=a(p.start);if(h(b))return 0<b?b:0},s=(a)=>{const b=a(p.end);return h(b)?b>n.length?n.length:b:p.end},t=(a,b)=>Array.prototype.slice.call(n||[],a,b),u=()=>t(p.start,p.end),v=()=>{q(0,o(l))},w=(a)=>{q(r(a),s(a))},x=(a)=>{w((b)=>b+a)},y=(a)=>{w((b)=>b-a)},z=()=>(y(l),u()),A=()=>(x(l),u()),B=()=>{v(),d.batchedList=u()},C=()=>{l+=g.ADD_COUNT_IF_UNSCROLLABLE;const a=n.length;a>l?B():(l=a,d.batchedList=n)},D=()=>{const{ADD_COUNT_IF_UNSCROLLABLE:a}=g;l<=a||(l-=a,B())};d.toTop=()=>{if(n&&n.length)return k.scrollTop=0,B()},d.toBottom=()=>{const a=n.length;a&&p.end<a&&(q(a-o(l),a),d.batchedList=u(),requestAnimationFrame(()=>{k.scrollTop=k.scrollHeight}))},d.onTop=()=>{0>=p.start||(d.batchedList=z(n),g.firstListItem.scrollIntoView())},d.onBottom=()=>{const a=n.length;if(a){if(p.end>=a)return;d.batchedList=A(n)}},d.adjustListHeight=()=>{const a=g.lastListItem;requestAnimationFrame(()=>{const{scrollHeight:b,clientHeight:c}=k,e=Math.round(c*g.MIN_SCROLLBAR_FACTOR);if(b<e)return d.$apply(()=>{C(),i(d)});let f=a;for(let a=l;0<a;a--){const{previousElementSibling:a}=f;if(!a)return;f=a}e<f.offsetTop&&d.$apply(()=>{D(),j(d)})})};const E=c.throttle(d.adjustListHeight,300);angular.element(b).on('resize',E),m.push(d.$watch(f.lazyList,(a)=>{n=a,B()})),m.push(d.$on('$destroy',()=>{m.forEach((a)=>a()),angular.element(b).off('resize',E)}))}})]},"../src/list-item/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'listItemModule',function(){return e});var d=c('../src/list-item/list-item.directive.js');const e=angular.module('list-item',[]);e.directive('listItem',d.listItemDirective)},"../src/list-item/list-item.directive.js":function(a,b,c){'use strict';c.r(b),c.d(b,'listItemDirective',function(){return d});const d=['$parse',(a)=>({restrict:'A',link:(b,c,d)=>{const e=a(d.onFirstRendered),f=a(d.onLastRendered),g=[];g.push(b.$watch('$first',(a)=>{a&&e(b,{element:c})}),b.$watch('$last',(a)=>{a&&f(b,{element:c})})),g.push(b.$on('$destroy',()=>g.forEach((a)=>a())))}})]},"../src/list/index.js":function(a,b,c){'use strict';c.r(b),c.d(b,'listModule',function(){return e});var d=c('../src/list/list.component.js');const e=angular.module('list',['core','list-item']);e.directive('list',d.listDirective)},"../src/list/list.component.js":function(a,b,c){'use strict';c.r(b),c.d(b,'listDirective',function(){return d});const d=['$parse','$log',(a,b)=>({restrict:'A',controller:function(){this.$onInit=()=>{this.firstListItem=null,this.lastListItem=null,this.MIN_EDGE=1,this.ADD_COUNT_IF_UNSCROLLABLE=2,this.MIN_SCROLLBAR_FACTOR=2,this.DEFAULT_BATCH_LENGTH=20}},link:(c,d,e,f)=>{const g=d[0],h=a(e.onTopList),i=a(e.onBottomList),j=(a)=>a<f.MIN_EDGE,k=(a)=>{const{clientHeight:b,scrollHeight:c}=g;return c-a-b<f.MIN_EDGE};c.firstItemRendered=(a)=>(f.firstListItem=a[0],!0),c.lastItemRendered=(a)=>(f.lastListItem=a[0],!0),c.hasOwnProperty('onScroll')?b.error('scope already has onScroll property. Please rename it to be able to use onScroll event.'):c.onScroll=(a)=>{a.defaultPrevented||requestAnimationFrame(()=>{const{scrollTop:a}=g;return j(a)?c.$apply(()=>{h(c)}):k(a)?c.$apply(()=>{i(c)}):void 0})}}})]}})});
//# sourceMappingURL=framedList.js.map